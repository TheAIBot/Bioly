<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Bioly</title>
		<script src="blockly_compressed.js"></script>
		<script src="blocks_compressed.js"></script>
		<script src="en.js"></script>
		<script src="costum_blocks.js"></script>
		<script src="cytoscape.js"></script>
		<script src="cytoscape-dagre.js"></script>
		<script src="helperFunctions.js"></script>
		<style>
			body {
				background-color: #fff;
				font-family: sans-serif;
			}
			h1 {
				font-weight: normal;
				font-size: 140%;
			}
			#graphDiv {
				width: 300px;
				height: 300px;
				display: block;
			}
		</style>
	</head>
	<body>
		<button onclick="save();">save</button>
		<button onclick="load();">load</button>
		<div id="blocklyDiv" style="height: 500px; width: 800px;"></div>
		<div id="graphDiv" style="height: 500px; width: 800px;"></div>
		<xml id="toolbox" style="display: none">
			<category name="Control">
				<block type="controls_if"></block>
				<block type="controls_repeat_ext"></block>
			</category>
			<category name="Arithmetic">
				<block type="math_number"></block>
				<block type="math_arithmetic"></block>
			</category>
			<category name="Logic">
				<block type="logic_compare"></block>
			</category>
			<category name="Fluids">
				<block type="input"></block>
				<block type="getInput"></block>
				<block type="fluid"></block>
				<block type="getFluid"></block>
			</category>
			<category name="Fluid operator">
				<block type="mixer"></block>
				<block type="splitter"></block>
				<block type="heater"></block>
			</category>
			<category name="Misc">
				<block type="start"></block>
				<block type="waste"></block>
				<block type="output"></block>
				<block type="sensor"></block>
			</category>
			<category name="Arrays">
				<block type="fluidArray"></block>
				<block type="setFLuidArrayIndex"></block>
				<block type="getFLuidArrayIndex"></block>
			</category>
		</xml>
		<script>
			function save() {
				const xml = Blockly.Xml.workspaceToDom(workspace);
				const xml_text = Blockly.Xml.domToText(xml);
				document.cookie = "dd=0" + xml_text;
			}
			function load() {
				const xml_text = document.cookie;
				const xml = Blockly.Xml.textToDom(xml_text);
				Blockly.Xml.domToWorkspace(xml, workspace);
			}
			
			var workspace = Blockly.inject('blocklyDiv',
				{media: 'media/',
				toolbox: document.getElementById('toolbox')});
		</script>
	</body>
</html>
